<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments :: head(ViewIt-GestionUser)}"></head>
<body>
<!-- Navigation menu -->
<header th:replace="~{fragments :: header}"></header>

<div class="container">
	<div>
		<div>
			<div class="conteneur-genre">
				<div>
					<h3>Utilisateurs</h3>
					<div class="zone-recherche-film-genre-user">
						<label for="recherche">Rechercher :</label>
						<input type="text" name="recherche" id="recherche">
					</div>
				</div>
				<div>
					<form  method="post" action="../admin/ajoutuser" id="ajout_utilisateur" style="color: white">
						<label for="mail">E-mail</label>
						<input type="text" name = "mail" id = "mail" class="ajout_utilisateur" required>
						<label for="nom">Nom</label>
						<input type="text" name = "nom" id = "nom" class="ajout_utilisateur" required>
						<label for="prenom">Prenom</label>
						<input type="text" name = "prenom" id = "prenom" class="ajout_utilisateur" required>
						<label for="mdp">Mot de passe</label>
						<input type="password" name = "mdp" id = "mdp" class="ajout_utilisateur" required>
						<input type="submit" name = "send" id = "send" value="Ajouter un utilisateur" class="ajout_utilisateur" onclick="addUserForm()">
					</form>
				</div>
			</div>
			<table class="tablelist">
				<thead>
				<tr class="user">
					<th>#</th>
					<th>Prénom</th>
					<th>Nom</th>
					<th>Email</th>
					<th>Admin</th>
					<th>Gestion</th>
				</tr>
				</thead>
				<tbody>
				<tr th:each="user : ${listUsers}" th:style="${user.id == utilisateurCo.id} ? 'background-color:yellow;font-weight: bold' : ''">
					<td th:text="${userStat.index+1}">1</td>
					<td th:text="${user.prenom}">Quentin</td>
					<td th:text="${user.nom}">Callens</td>
					<td th:text="${user.email}">quentin.callens@hei.yncrea.fr</td>
					<td th:text="${user.admin == 1}? 'Oui' : 'Non'" class="small_column">Oui</td>
					<td class="small_column">
						<div class="column-gestion">
							<form method="post" >
								<button   onclick="if(confirm('Etes vous sur de vouloir changer le rôle de cet utilisateur ?')){}else{return false;}" th:if="${user.id != utilisateurCo.id}" th:name="${user.admin==0} ? 'up' : 'down'" th:value="${userStat.index}" th:title="${user.admin==1} ? ${'Retrograder '+user.prenom + ' '+user.nom} : ${'Promouvoir '+user.prenom + ' '+user.nom }" class="btn-delete" type="submit" th:id="${userStat.index}"><img class="img_liste" th:src="${user.admin == 0} ? '../images/icones/up.png' : '../images/icones/down_user.png'"></button>
							</form>
							<a th:href="${'../admin/modifuser?id='+user.id}"><img class="img_liste" src="../images/icones/modification.png"alt="modifier"></a>
							<form th:if="${user.id != utilisateurCo.id}"  method="post">
								<button onclick="if(confirm('Etes vous sur de vouloir supprimer cet utilisateur ?')){}else{return false;}" name="supp" th:value="${userStat.index}" th:title="'Supprimer ' +${user.prenom} +' '+${user.nom}" class="btn-delete" type="submit" th:id="${userStat.index}"><img class="img_liste" src="../images/icones/supprimer.png"alt="supprimer"></button>
							</form>
						</div>

					</td>
				</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
</body>
<footer th:replace="~{fragments :: footer}"></footer>
</html>